<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
"http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd">
<chapter id="additional-resources">
  <title>TorqueBox Additional Resources</title>

  <section id="backstage">
    <title>BackStage</title>

    <para>BackStage is a Sinatra app that you may deploy within TorqueBox to
    get additional views and control into your application's components.
    </para>

    <para><mediaobject>
        <imageobject>
          <imagedata fileref="images/backstage.png" width="100%" />
        </imageobject>
      </mediaobject></para>

    <section>
      <title>Features</title>

      <formalpara>
        <title>Applications</title>

        <para>View all deployed Ruby applications.</para>
      </formalpara>

      <formalpara>
        <title>Destinations</title>

        <para>Enumerate and interrogate messaging queues and topics. Allows
        browsing of messages within queues.</para>
      </formalpara>

      <formalpara>
        <title>Message Processors</title>

        <para>Control message processors, including pausing their
        execution.</para>
      </formalpara>

      <formalpara>
        <title>Scheduled Jobs</title>

        <para>Scheduled jobs can be paused.</para>
      </formalpara>

      <formalpara>
        <title>Ruby Runtime Pools</title>

        <para>View information about the runtime pools for all applications. Allows 
        arbitrary script execution within a runtime from a pool.</para>
      </formalpara>
    </section>

    <section>
      <title>More Information</title>

      <para>More Information About Backstage May Be Found On The Torquebox
      Website. The Source For Backstage Is Hosted At Github.</para>

      <itemizedlist>
        <listitem>
          <para><ulink
          url="http://torquebox.org/backstage">Http://torquebox.org/backstage</ulink></para>
        </listitem>

        <listitem>
          <para><ulink
          url="http://github.com/torquebox/backstage">Http://github.com/torquebox/backstage</ulink></para>
        </listitem>
      </itemizedlist>
    </section>
  </section>

  <section id="new-relic">
    <title>New Relic</title>

    <para><ulink url="http://newrelic.com">New Relic</ulink> is an application
      monitoring and management tool that provides statistics about and insight
      into your application. New Relic will work with TorqueBox just like any
      other Ruby application. There are some minor caveats regarding JRuby
      which New Relic lists on their 
      <ulink url="https://newrelic.com/docs/general/new-relic-on-jruby">FAQ</ulink>.
    </para>
    <section>
      <title>Usage</title>

      <para>
        Using New Relic with TorqueBox is just like using it with any other
        Ruby application. You simply install the gem and ensure it's available
        to your application. This is usually accomplished using Bundler.
        Additionally, TorqueBox provides some basic integration with New Relic's
        Background Tasks tab. Methods run in background tasks via
        <code>always_background</code> or <code>obj.background.some_method</code>
        will appear in this tab.
        Complete details about New Relic's Ruby integration can be found on the
        <ulink url="https://newrelic.com/docs/ruby/new-relic-for-ruby">
          New Relic website</ulink>.
      </para>

      <para>Note: when using New Relic with Rails 2.3.x you may need to add
        the following code to your <code>config/environments/production.rb</code>
        file.
        <screen>begin
  require 'newrelic_rpm'
  NewRelic::Agent
rescue
  # Log the exception, mayhap
end</screen>
      </para>
    </section>
  </section>

</chapter>
